<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MBTIèŒä¸šæ€§æ ¼æµ‹è¯•</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FF9AA2',
                        secondary: '#FFB7B2',
                        tertiary: '#FFDAC1',
                        accent: '#E2F0CB',
                        neutral: '#B5EAD7',
                        background: '#C7CEEA',
                        e: '#FF9AA2', // å¤–å€¾
                        i: '#B5EAD7', // å†…å€¾
                        s: '#FFB7B2', // æ„Ÿè§‰
                        n: '#E2F0CB', // ç›´è§‰
                        t: '#FFDAC1', // æ€ç»´
                        f: '#C7CEEA', // æƒ…æ„Ÿ
                        j: '#FF9AA2', // åˆ¤æ–­
                        p: '#B5EAD7', // çŸ¥è§‰
                    },
                    fontFamily: {
                        title: ['"Comic Sans MS"', '"åæ–‡å½©äº‘"', 'cursive'],
                        body: ['"å¾®è½¯é›…é»‘"', '"å¹¼åœ†"', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }

            .bg-glass {
                background: rgba(255, 255, 255, 0.7);
                backdrop-filter: blur(10px);
            }

            .btn-hover {
                transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            }

            .btn-hover:hover {
                transform: translateY(-2px);
                box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            }

            .btn-active {
                transition: all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
            }

            .btn-active:active {
                transform: scale(0.96);
                box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
            }

            .progress-animation {
                transition: width 0.5s ease-in-out;
            }

            .card-shadow {
                box-shadow: 0 14px 28px rgba(0, 0, 0, 0.05), 0 10px 10px rgba(0, 0, 0, 0.03);
            }

            .firework {
                position: absolute;
                border-radius: 50%;
                transform: scale(0);
                opacity: 0;
                animation: firework 2s ease-out forwards;
            }

            @keyframes firework {
                0% {
                    transform: scale(0);
                    opacity: 1;
                }

                50% {
                    transform: scale(1);
                    opacity: 1;
                }

                100% {
                    transform: scale(1.5);
                    opacity: 0;
                }
            }

            .text-shadow {
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            }

            .result-card {
                background: linear-gradient(135deg, #FF9AA2 0%, #B5EAD7 100%);
            }

            .touch-target {
                min-height: 48px;
                min-width: 48px;
            }

            .mbti-bar {
                height: 2rem;
                border-radius: 9999px;
                overflow: hidden;
                background-color: rgba(255, 255, 255, 0.3);
            }

            .mbti-bar-fill {
                height: 100%;
                transition: width 1s ease-in-out;
            }
            
            .image-loading {
                position: relative;
                overflow: hidden;
                background: linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%);
                background-size: 200% 100%;
                animation: loading 1.5s infinite;
            }
            
            @keyframes loading {
                0% { background-position: 200% 0; }
                100% { background-position: -200% 0; }
            }
            
            .image-error {
                display: flex;
                align-items: center;
                justify-content: center;
                border: 2px dashed #ff6b6b;
                color: #ff6b6b;
                font-weight: bold;
            }
        }
    </style>
</head>

<body class="min-h-screen flex flex-col items-center justify-between bg-gradient-to-br from-background to-neutral p-4 font-body">
    <!-- å†…å®¹å®¹å™¨ - å±…ä¸­æ˜¾ç¤º -->
    <div class="flex-1 w-full max-w-md mx-auto flex flex-col items-center justify-center">
        <!-- è¿›åº¦æ¡å®¹å™¨ -->
        <div id="progress-container" class="w-full mb-6 transition-all duration-500 hidden">
            <div class="text-center text-sm font-medium text-gray-700 mb-1">
                <span id="progress-text">1/10</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2.5">
                <div id="progress-bar" class="bg-primary h-2.5 rounded-full progress-animation" style="width: 10%"></div>
            </div>
        </div>

        <!-- æµ‹è¯•å¡ç‰‡å®¹å™¨ -->
        <div id="test-container" class="w-full flex flex-col items-center">
            <!-- æµ‹è¯•æ ‡é¢˜å¡ç‰‡ -->
            <div id="title-card" class="bg-glass rounded-3xl p-6 md:p-8 mb-6 card-shadow w-full">
                <h1 class="text-[clamp(1.8rem,5vw,3rem)] font-title text-center text-gray-800 text-shadow mb-6">
                    MBTI16äººæ ¼æµ‹è¯•
                </h1>
                <p class="text-center text-gray-600 mb-8 text-base md:text-lg">
                    æœ¬æµ‹è¯•å…±æœ‰10é“é¢˜ï¼Œå°†å¸®åŠ©ä½ äº†è§£è‡ªå·±çš„æ€§æ ¼ç±»å‹ã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹æµ‹è¯•å§ï¼
                </p>
                <button id="start-btn" class="w-full bg-primary hover:bg-primary/90 text-white font-bold py-4 px-8 rounded-full btn-hover btn-active transition-all touch-target">
                    å¼€å§‹æµ‹è¯•
                </button>
            </div>

            <!-- é¢˜ç›®å¡ç‰‡å®¹å™¨ -->
            <div id="questions-container" class="w-full">
                <!-- é¢˜ç›®å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>

            <!-- ç»“æœå¡ç‰‡ -->
            <div id="result-card" class="result-card rounded-3xl p-6 md:p-10 shadow-xl w-full hidden">
                <h2 class="text-[clamp(1.5rem,4vw,2.5rem)] font-title text-center text-white text-shadow mb-6">
                    ä½ çš„æ€§æ ¼ç±»å‹æ˜¯ï¼š
                </h2>
                <div id="result-type" class="text-[clamp(2rem,6vw,3.5rem)] font-bold text-center text-white mb-8"></div>
                <!-- æ·»åŠ å›¾ç‰‡æ˜¾ç¤ºåŒºåŸŸ -->
                <div class="relative mx-auto mb-8 w-full">
                    <div id="image-placeholder" class="image-loading rounded-2xl shadow-lg h-64 w-full"></div>
                    <img id="result-image" class="mx-auto rounded-2xl shadow-lg absolute inset-0 w-full h-full object-cover opacity-0 transition-opacity duration-500" src="" alt="MBTIæ€§æ ¼ç±»å‹å›¾ç‰‡">
                </div>
                <div id="result-description" class="text-white text-center mb-10 text-base md:text-xl"></div>
                <!-- å›¾è¡¨å®¹å™¨ -->
                <div class="bg-white/20 rounded-xl p-4 mb-8 backdrop-blur-sm">
                    <h3 class="text-white text-center mb-6 font-bold">æ€§æ ¼ç»´åº¦å¯¹æ¯”</h3>
                    <div id="mbti-chart-container" class="space-y-8">
                        <!-- æ€§æ ¼ç»´åº¦å¯¹æ¯”å›¾è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
                <button id="restart-btn" class="w-full bg-white text-primary hover:bg-gray-100 font-bold py-4 px-8 rounded-full btn-hover btn-active transition-all touch-target">
                    å†è¯•ä¸€æ¬¡
                </button>
            </div>
        </div>
    </div>

    <!-- çƒŸèŠ±æ•ˆæœå®¹å™¨ -->
    <div id="fireworks-container" class="fixed inset-0 pointer-events-none z-0 hidden"></div>

    <!-- åº•éƒ¨ä¿¡æ¯ - å›ºå®šåœ¨è§†å£åº•éƒ¨ -->
    <div class="w-full max-w-md mx-auto text-center text-gray-700 text-xs font-body py-4">
        <p>æµ‹è¯•ä»…ä¾›å¨±ä¹ï¼Œéä¸“ä¸šå¿ƒç†è¯„ä¼°</p>
        <p class="mt-1">Â© 2025 MBTIæµ‹è¯•å¹³å°</p>
        <p class="mt-1">ç‰ˆæœ¬:1.2.10 Made by é™ˆçœå®‰</p>
    </div>

    <script>
        // å®šä¹‰MBTIç±»å‹åŠå…¶æè¿°
        const mbtiTypes = {
            "INTJ": "å»ºç­‘å¸ˆå‹äººæ ¼ï¼ˆINTJï¼‰<br>ä½ æ˜¯ä¸€ä¸ªå¯Œæœ‰åˆ›é€ åŠ›å’Œæˆ˜ç•¥æ€§æ€ç»´çš„äººï¼Œ<br>æ€»æ˜¯èƒ½çœ‹åˆ°äº‹ç‰©çš„æ½œåœ¨å¯èƒ½æ€§ã€‚<br>ğŸŒŸ ä½ èªæ˜ã€ç‹¬ç«‹ï¼Œå–œæ¬¢æ·±å…¥æ€è€ƒå¤æ‚çš„é—®é¢˜ã€‚<br>ğŸ’¡ ä½ æœ‰å¾ˆå¼ºçš„æ´å¯ŸåŠ›å’Œå†³æ–­åŠ›ï¼Œå–„äºè§„åˆ’æœªæ¥ã€‚<br>ğŸš€ ä½ è¿½æ±‚å®Œç¾ï¼Œå¯¹è‡ªå·±å’Œä»–äººéƒ½æœ‰å¾ˆé«˜çš„æ ‡å‡†ã€‚",
            "INTP": "é€»è¾‘å­¦å®¶å‹äººæ ¼ï¼ˆINTPï¼‰<br>ä½ æ˜¯ä¸€ä¸ªç†æ€§ã€å¥½å¥‡ä¸”å¯Œæœ‰åˆ›é€ åŠ›çš„æ€è€ƒè€…ï¼Œ<br>å–œæ¬¢æ¢ç´¢ç†è®ºå’Œæ¦‚å¿µã€‚<br>ğŸ§  ä½ æ“…é•¿åˆ†æé—®é¢˜ï¼Œå¯»æ‰¾é€»è¾‘æ¼æ´å’Œè§£å†³æ–¹æ¡ˆã€‚<br>ğŸ¯ ä½ ç‹¬ç«‹è‡ªä¸»ï¼Œä¸å–œæ¬¢å—çº¦æŸï¼Œå–œæ¬¢æŒ‰ç…§è‡ªå·±çš„èŠ‚å¥å·¥ä½œã€‚<br>ğŸŒŒ ä½ å¯¹çŸ¥è¯†æœ‰ç€æ— å°½çš„æ¸´æœ›ï¼Œæ€»æ˜¯åœ¨å­¦ä¹ æ–°çš„ä¸œè¥¿ã€‚",
            "ENTJ": "æŒ‡æŒ¥å®˜å‹äººæ ¼ï¼ˆENTJï¼‰<br>ä½ æ˜¯ä¸€ä¸ªè‡ªä¿¡ã€æœæ–­ä¸”æœ‰é¢†å¯¼åŠ›çš„äººï¼Œ<br>å–œæ¬¢æŒæ§å±€é¢å¹¶æ¨åŠ¨äº‹æƒ…å‘å±•ã€‚<br>ğŸ‘‘ ä½ æœ‰å¾ˆå¼ºçš„ç»„ç»‡èƒ½åŠ›å’Œå†³ç­–åŠ›ï¼Œå–„äºåˆ¶å®šè®¡åˆ’å’Œç›®æ ‡ã€‚<br>ğŸ’¼ ä½ è¿½æ±‚æ•ˆç‡å’Œæˆæœï¼Œä¸å–œæ¬¢æµªè´¹æ—¶é—´åœ¨æ— å…³ç´§è¦çš„äº‹æƒ…ä¸Šã€‚<br>ğŸŒŸ ä½ æœ‰è¿œè§å“è¯†ï¼Œèƒ½å¤Ÿçœ‹åˆ°å¤§å±€å¹¶å¼•é¢†å›¢é˜Ÿèµ°å‘æˆåŠŸã€‚",
            "ENTP": "è¾©è®ºå®¶å‹äººæ ¼ï¼ˆENTPï¼‰<br>ä½ æ˜¯ä¸€ä¸ªèªæ˜ã€æœºæ™ºä¸”å¯Œæœ‰åˆ›æ„çš„äººï¼Œ<br>å–œæ¬¢æŒ‘æˆ˜ä¼ ç»Ÿè§‚å¿µå’Œæƒå¨ã€‚<br>ğŸ’¬ ä½ æ“…é•¿è¾©è®ºå’Œè¯´æœä»–äººï¼Œæ€»èƒ½æ‰¾åˆ°æ–°é¢–çš„è§‚ç‚¹å’Œè§£å†³æ–¹æ¡ˆã€‚<br>ğŸ­ ä½ å¥½å¥‡å¿ƒå¼ºï¼Œå¯¹å„ç§äº‹ç‰©éƒ½æœ‰å…´è¶£ï¼Œå–œæ¬¢æ¢ç´¢æ–°é¢†åŸŸã€‚<br>ğŸš€ ä½ é€‚åº”æ€§å¼ºï¼Œèƒ½å¤Ÿå¿«é€Ÿåº”å¯¹å˜åŒ–å’ŒæŒ‘æˆ˜ã€‚",
            "INFJ": "æå€¡è€…å‹äººæ ¼ï¼ˆINFJï¼‰<br>ä½ æ˜¯ä¸€ä¸ªå¯Œæœ‰æ´å¯ŸåŠ›ã€åŒæƒ…å¿ƒå’Œåˆ›é€ åŠ›çš„äººï¼Œ<br>æ€»æ˜¯èƒ½ç†è§£ä»–äººçš„æƒ…æ„Ÿå’Œéœ€æ±‚ã€‚<br>ğŸŒˆ ä½ æœ‰å¾ˆå¼ºçš„ç›´è§‰å’ŒåŒç†å¿ƒï¼Œå–„äºæ„ŸçŸ¥ä»–äººçš„å†…å¿ƒä¸–ç•Œã€‚<br>ğŸŒŸ ä½ è¿½æ±‚å’Œè°ä¸æ„ä¹‰ï¼Œå–œæ¬¢å¸®åŠ©ä»–äººå®ç°è‡ªæˆ‘ä»·å€¼ã€‚<br>ğŸ’« ä½ æœ‰è‡ªå·±ç‹¬ç‰¹çš„ä»·å€¼è§‚å’Œä¿¡ä»°ï¼Œå¹¶ä¸”åšå®šä¸ç§»åœ°è¿½æ±‚å®ƒä»¬ã€‚",
            "INFP": "è°ƒåœè€…å‹äººæ ¼ï¼ˆINFPï¼‰<br>ä½ æ˜¯ä¸€ä¸ªç†æƒ³ä¸»ä¹‰ã€å¯Œæœ‰åŒæƒ…å¿ƒä¸”æ•æ„Ÿçš„äººï¼Œ<br>æ€»æ˜¯å…³æ³¨ä»–äººçš„æƒ…æ„Ÿå’Œéœ€æ±‚ã€‚<br>ğŸŒ¸ ä½ æœ‰ä¸°å¯Œçš„å†…å¿ƒä¸–ç•Œå’Œæƒ³è±¡åŠ›ï¼Œå–œæ¬¢åˆ›é€ å’Œè¡¨è¾¾è‡ªå·±ã€‚<br>ğŸ’– ä½ è¿½æ±‚å’Œè°ä¸ç¾å¥½ï¼Œå¯¹ä¸å…¬æ­£å’Œè‹¦éš¾æ„Ÿåˆ°æ•æ„Ÿã€‚<br>ğŸŒŸ ä½ æœ‰å¾ˆå¼ºçš„é“å¾·æ„Ÿå’Œä»·å€¼è§‚ï¼Œå¹¶ä¸”æ„¿æ„ä¸ºäº†ç†æƒ³è€Œå¥‹æ–—ã€‚",
            "ENFJ": "ä¸»äººå…¬å‹äººæ ¼ï¼ˆENFJï¼‰<br>ä½ æ˜¯ä¸€ä¸ªçƒ­æƒ…ã€æœ‰é¢†å¯¼åŠ›ä¸”å–„äºç¤¾äº¤çš„äººï¼Œ<br>æ€»æ˜¯èƒ½æ¿€åŠ±å’Œå½±å“ä»–äººã€‚<br>ğŸŒŸ ä½ æœ‰å¾ˆå¼ºçš„äººé™…äº¤å¾€èƒ½åŠ›å’ŒåŒç†å¿ƒï¼Œå–„äºç†è§£å’Œæ»¡è¶³ä»–äººçš„éœ€æ±‚ã€‚<br>ğŸ’¼ ä½ æœ‰è¿œå¤§çš„ç†æƒ³å’Œç›®æ ‡ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¸¦é¢†å›¢é˜Ÿä¸€èµ·å®ç°å®ƒä»¬ã€‚<br>ğŸŒˆ ä½ è¿½æ±‚å’Œè°ä¸åˆä½œï¼Œå–œæ¬¢è¥é€ ç§¯æå‘ä¸Šçš„æ°›å›´ã€‚",
            "ENFP": "ç«é€‰è€…å‹äººæ ¼ï¼ˆENFPï¼‰<br>ä½ æ˜¯ä¸€ä¸ªçƒ­æƒ…ã€å……æ»¡æ´»åŠ›ä¸”å¯Œæœ‰åˆ›é€ åŠ›çš„äººï¼Œ<br>æ€»æ˜¯èƒ½ç»™å‘¨å›´çš„äººå¸¦æ¥å¿«ä¹å’Œçµæ„Ÿã€‚<br>ğŸ¡ ä½ æœ‰ä¸°å¯Œçš„æƒ³è±¡åŠ›å’Œåˆ›æ–°æ€ç»´ï¼Œå–œæ¬¢æ¢ç´¢æ–°çš„å¯èƒ½æ€§å’Œæœºä¼šã€‚<br>ğŸ’– ä½ çƒ­çˆ±ç¤¾äº¤å’Œä¸äººäº’åŠ¨ï¼Œå–„äºå»ºç«‹å’Œç»´æŠ¤äººé™…å…³ç³»ã€‚<br>ğŸŒŸ ä½ ä¹è§‚å‘ä¸Šï¼Œå¯¹ç”Ÿæ´»å……æ»¡çƒ­æƒ…ï¼Œæ€»æ˜¯èƒ½çœ‹åˆ°äº‹æƒ…çš„ç§¯æé¢ã€‚",
            "ISTJ": "ç‰©æµå¸ˆå‹äººæ ¼ï¼ˆISTJï¼‰<br>ä½ æ˜¯ä¸€ä¸ªå®é™…ã€æœ‰åºä¸”è´Ÿè´£ä»»çš„äººï¼Œ<br>æ€»æ˜¯èƒ½é«˜æ•ˆåœ°å®Œæˆä»»åŠ¡å’Œå±¥è¡ŒèŒè´£ã€‚<br>ğŸ“š ä½ æ³¨é‡ç»†èŠ‚å’Œäº‹å®ï¼Œå–œæ¬¢æŒ‰ç…§è§„åˆ™å’Œç¨‹åºåšäº‹ã€‚<br>ğŸ’¼ ä½ æœ‰å¾ˆå¼ºçš„è´£ä»»å¿ƒå’Œå¿ è¯šåº¦ï¼Œå¯¹å·¥ä½œå’Œå®¶åº­éƒ½éå¸¸è®¤çœŸã€‚<br>ğŸŒŸ ä½ ç¨³é‡å¯é ï¼Œæ˜¯å›¢é˜Ÿä¸­å€¼å¾—ä¿¡èµ–çš„æˆå‘˜ã€‚",
            "ISFJ": "å®ˆå«è€…å‹äººæ ¼ï¼ˆISFJï¼‰<br>ä½ æ˜¯ä¸€ä¸ªæ¸©æš–ã€ä½“è´´ä¸”å¯Œæœ‰åŒæƒ…å¿ƒçš„äººï¼Œ<br>æ€»æ˜¯èƒ½å…³æ³¨å’Œç…§é¡¾ä»–äººçš„éœ€æ±‚ã€‚<br>ğŸŒ¸ ä½ æ³¨é‡ç»†èŠ‚å’Œä¼ ç»Ÿï¼Œå–œæ¬¢ç¨³å®šå’Œæœ‰åºçš„ç”Ÿæ´»ã€‚<br>ğŸ’– ä½ æœ‰å¾ˆå¼ºçš„è´£ä»»å¿ƒå’Œå¥‰çŒ®ç²¾ç¥ï¼Œæ„¿æ„ä¸ºä»–äººä»˜å‡ºæ—¶é—´å’Œç²¾åŠ›ã€‚<br>ğŸŒŸ ä½ æ˜¯å›¢é˜Ÿä¸­çš„æ”¯æŒè€…å’Œå®ˆæŠ¤è€…ï¼Œæ€»æ˜¯èƒ½åœ¨ä»–äººéœ€è¦æ—¶æä¾›å¸®åŠ©ã€‚",
            "ESTJ": "æ€»ç»ç†å‹äººæ ¼ï¼ˆESTJï¼‰<br>ä½ æ˜¯ä¸€ä¸ªåŠ¡å®ã€æœæ–­ä¸”æœ‰é¢†å¯¼åŠ›çš„äººï¼Œ<br>æ€»æ˜¯èƒ½é«˜æ•ˆåœ°ç»„ç»‡å’Œç®¡ç†äº‹åŠ¡ã€‚<br>ğŸ‘” ä½ æ³¨é‡äº‹å®å’Œé€»è¾‘ï¼Œå–œæ¬¢æŒ‰ç…§è®¡åˆ’å’Œè§„åˆ™åšäº‹ã€‚<br>ğŸ’¼ ä½ æœ‰å¾ˆå¼ºçš„è´£ä»»å¿ƒå’Œå†³ç­–åŠ›ï¼Œå–„äºåˆ¶å®šå’Œæ‰§è¡Œè®¡åˆ’ã€‚<br>ğŸŒŸ ä½ æ˜¯å›¢é˜Ÿä¸­çš„é¢†å¯¼è€…å’Œç»„ç»‡è€…ï¼Œèƒ½å¤Ÿå¸¦é¢†å›¢é˜Ÿå®ç°ç›®æ ‡ã€‚",
            "ESFJ": "æ‰§æ”¿å®˜å‹äººæ ¼ï¼ˆESFJï¼‰<br>ä½ æ˜¯ä¸€ä¸ªçƒ­æƒ…ã€å‹å¥½ä¸”å–„äºç¤¾äº¤çš„äººï¼Œ<br>æ€»æ˜¯èƒ½è¥é€ å’Œè°çš„æ°›å›´å’Œå»ºç«‹è‰¯å¥½çš„äººé™…å…³ç³»ã€‚<br>ğŸŒˆ ä½ æ³¨é‡ä»–äººçš„æ„Ÿå—å’Œéœ€æ±‚ï¼Œå–œæ¬¢å¸®åŠ©ä»–äººè§£å†³é—®é¢˜ã€‚<br>ğŸ’– ä½ æœ‰å¾ˆå¼ºçš„ç»„ç»‡èƒ½åŠ›å’Œå›¢é˜Ÿåˆä½œç²¾ç¥ï¼Œå–„äºåè°ƒå’Œæ²Ÿé€šã€‚<br>ğŸŒŸ ä½ æ˜¯å›¢é˜Ÿä¸­çš„ç²˜åˆå‰‚ï¼Œèƒ½å¤Ÿä¿ƒè¿›å›¢é˜Ÿæˆå‘˜ä¹‹é—´çš„åˆä½œå’Œå›¢ç»“ã€‚",
            "ISTP": "é‰´èµå®¶å‹äººæ ¼ï¼ˆISTPï¼‰<br>ä½ æ˜¯ä¸€ä¸ªå®é™…ã€çµæ´»ä¸”å–„äºè§£å†³é—®é¢˜çš„äººï¼Œ<br>æ€»æ˜¯èƒ½å¿«é€Ÿåº”å¯¹å„ç§æŒ‘æˆ˜å’Œå˜åŒ–ã€‚<br>ğŸ”§ ä½ æ³¨é‡å®è·µå’ŒåŠ¨æ‰‹èƒ½åŠ›ï¼Œå–œæ¬¢æ¢ç´¢å’Œå°è¯•æ–°çš„äº‹ç‰©ã€‚<br>ğŸ’¡ ä½ æœ‰å¾ˆå¼ºçš„è§‚å¯ŸåŠ›å’Œåˆ†æèƒ½åŠ›ï¼Œèƒ½å¤Ÿå¿«é€Ÿæ‰¾åˆ°é—®é¢˜çš„å…³é”®æ‰€åœ¨ã€‚<br>ğŸŒŸ ä½ ç‹¬ç«‹è‡ªä¸»ï¼Œå–œæ¬¢æŒ‰ç…§è‡ªå·±çš„æ–¹å¼åšäº‹ï¼Œä¸å–œæ¬¢å—çº¦æŸã€‚",
            "ISFP": "æ¢é™©å®¶å‹äººæ ¼ï¼ˆISFPï¼‰<br>ä½ æ˜¯ä¸€ä¸ªæ¸©å’Œã€æ•æ„Ÿä¸”å¯Œæœ‰è‰ºæœ¯æ°”æ¯çš„äººï¼Œ<br>æ€»æ˜¯èƒ½æ¬£èµå’Œåˆ›é€ ç¾å¥½çš„äº‹ç‰©ã€‚<br>ğŸ¨ ä½ æ³¨é‡ä¸ªäººæ„Ÿå—å’Œä½“éªŒï¼Œå–œæ¬¢è‡ªç”±å’Œç‹¬ç«‹çš„ç”Ÿæ´»ã€‚<br>ğŸ’– ä½ æœ‰å¾ˆå¼ºçš„åˆ›é€ åŠ›å’Œå®¡ç¾èƒ½åŠ›ï¼Œå–„äºè¡¨è¾¾è‡ªå·±çš„æƒ…æ„Ÿå’Œæƒ³æ³•ã€‚<br>ğŸŒŸ ä½ æ˜¯ä¸€ä¸ªå’Œå¹³ä¸»ä¹‰è€…ï¼Œå–œæ¬¢é¿å…å†²çªå’Œäº‰åµï¼Œè¿½æ±‚å’Œè°ä¸å¹³è¡¡ã€‚",
            "ESTP": "ä¼ä¸šå®¶å‹äººæ ¼ï¼ˆESTPï¼‰<br>ä½ æ˜¯ä¸€ä¸ªå¤–å‘ã€æœæ–­ä¸”å–„äºç¤¾äº¤çš„äººï¼Œ<br>æ€»æ˜¯èƒ½åœ¨å„ç§åœºåˆä¸­è‡ªå¦‚åº”å¯¹å¹¶å–å¾—æˆåŠŸã€‚<br>ğŸ’¼ ä½ æ³¨é‡å®é™…å’Œç»“æœï¼Œå–œæ¬¢æŒ‘æˆ˜å’Œå†’é™©ã€‚<br>ğŸ­ ä½ æœ‰å¾ˆå¼ºçš„åº”å˜èƒ½åŠ›å’Œå†³ç­–åŠ›ï¼Œèƒ½å¤Ÿå¿«é€Ÿåšå‡ºåˆ¤æ–­å’Œè¡ŒåŠ¨ã€‚<br>ğŸŒŸ ä½ æ˜¯ä¸€ä¸ªå¤©ç”Ÿçš„é¢†å¯¼è€…å’Œåˆ›ä¸šè€…ï¼Œå–œæ¬¢æŒæ§å±€é¢å¹¶æ¨åŠ¨äº‹æƒ…å‘å±•ã€‚",
            "ESFP": "è¡¨æ¼”è€…å‹äººæ ¼ï¼ˆESFPï¼‰<br>ä½ æ˜¯ä¸€ä¸ªçƒ­æƒ…ã€æ´»æ³¼ä¸”å–„äºç¤¾äº¤çš„äººï¼Œ<br>æ€»æ˜¯èƒ½ç»™å‘¨å›´çš„äººå¸¦æ¥å¿«ä¹å’Œæ´»åŠ›ã€‚<br>ğŸª ä½ æ³¨é‡å½“ä¸‹çš„ä½“éªŒå’Œæ„Ÿå—ï¼Œå–œæ¬¢äº«å—ç”Ÿæ´»å’Œä¸äººäº’åŠ¨ã€‚<br>ğŸ’ƒ ä½ æœ‰å¾ˆå¼ºçš„è¡¨ç°åŠ›å’Œæ„ŸæŸ“åŠ›ï¼Œå–„äºå¸å¼•ä»–äººçš„æ³¨æ„åŠ›å’Œå…³æ³¨ã€‚<br>ğŸŒŸ ä½ æ˜¯ä¸€ä¸ªä¹è§‚ä¸»ä¹‰è€…ï¼Œå¯¹ç”Ÿæ´»å……æ»¡çƒ­æƒ…ï¼Œæ€»æ˜¯èƒ½çœ‹åˆ°äº‹æƒ…çš„ç§¯æé¢ã€‚"
        };

        // å®šä¹‰10é“ç¤ºä¾‹é¢˜ç›®ï¼ˆåŸä»£ç ä¸­æœ‰200é“ï¼Œè¿™é‡Œåªä¿ç•™10é“ä½œä¸ºç¤ºä¾‹ï¼‰
        const questions = [
            // --------------------------- ç¤ºä¾‹é¢˜ç›®ï¼ˆ10é“ï¼‰ ---------------------------
            {
                text: "è¯·é€‰æ‹©æ›´é€‚åˆä½ çš„æè¿°ï¼š",
                options: [
                    { text: "A. æ³¨é‡éšç§", type: "I" },
                    { text: "B. å¦ç‡å¼€æ”¾", type: "E" }
                ]
            },
            {
                text: "è¯·é€‰æ‹©æ›´é€‚åˆä½ çš„æè¿°ï¼š",
                options: [
                    { text: "A. é¢„å…ˆå®‰æ’çš„", type: "J" },
                    { text: "B. èµ°ä¸€æ­¥çœ‹ä¸€æ­¥", type: "P" }
                ]
            },
            {
                text: "è¯·é€‰æ‹©æ›´é€‚åˆä½ çš„æè¿°ï¼š",
                options: [
                    { text: "A. å–œæ¬¢æ¯”å–»è”æƒ³", type: "N" },
                    { text: "B. å–œæ¬¢å…·ä½“æè¿°", type: "S" }
                ]
            },
            {
                text: "è¯·é€‰æ‹©æ›´é€‚åˆä½ çš„æè¿°ï¼š",
                options: [
                    { text: "A. è¿åˆä»–äºº", type: "F" },
                    { text: "B. æ‰¹è¯„ä»–äºº", type: "T" }
                ]
            },
            {
                text: "è¯·é€‰æ‹©æ›´é€‚åˆä½ çš„æè¿°ï¼š",
                options: [
                    { text: "A. å®¢è§‚å…¬æ­£", type: "T" },
                    { text: "B. åå¥½å’Œç¦", type: "F" }
                ]
            },
            {
                text: "è¯·é€‰æ‹©æ›´é€‚åˆä½ çš„æè¿°ï¼š",
                options: [
                    { text: "A. å…³æ³¨æ•ˆç›Š", type: "S" },
                    { text: "B. å…³æ³¨æ„ä¹‰", type: "N" }
                ]
            },
            {
                text: "è¯·é€‰æ‹©æ›´é€‚åˆä½ çš„æè¿°ï¼š",
                options: [
                    { text: "A. æ˜“å†²åŠ¨", type: "P" },
                    { text: "B. å…ˆæ€è€ƒ", type: "J" }
                ]
            },
            {
                text: "è¯·é€‰æ‹©æ›´é€‚åˆä½ çš„æè¿°ï¼š",
                options: [
                    { text: "A. ç¤¾äº¤ä¼šæ¶ˆè€—èƒ½é‡", type: "I" },
                    { text: "B. ç¤¾äº¤ä¼šäº§ç”Ÿèƒ½é‡", type: "E" }
                ]
            },
            {
                text: "è¯·é€‰æ‹©æ›´é€‚åˆä½ çš„æè¿°ï¼š",
                options: [
                    { text: "A. æœ‰ç³»ç»Ÿçš„", type: "J" },
                    { text: "B. éšæ€§è€Œä¸º", type: "P" }
                ]
            },
            {
                text: "è¯·é€‰æ‹©æ›´é€‚åˆä½ çš„æè¿°ï¼š",
                options: [
                    { text: "A. å…³æ³¨å…¨è²Œ", type: "N" },
                    { text: "B. æ³¨é‡ç»†èŠ‚", type: "S" }
                ]
            }
            // å…¶ä½™190é“é¢˜ç›®å·²çœç•¥...
        ];

        // åˆå§‹åŒ–å˜é‡
        let currentQuestionIndex = 0;
        let answers = {
            "E": 0, "I": 0,
            "S": 0, "N": 0,
            "T": 0, "F": 0,
            "J": 0, "P": 0
        };

        // DOMå…ƒç´ 
        const titleCard = document.getElementById('title-card');
        const questionsContainer = document.getElementById('questions-container');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const resultCard = document.getElementById('result-card');
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');
        const fireworksContainer = document.getElementById('fireworks-container');
        const progressContainer = document.getElementById('progress-container');
        const resultImage = document.getElementById('result-image');
        const imagePlaceholder = document.getElementById('image-placeholder');

        // äº‹ä»¶ç›‘å¬å™¨
        startBtn.addEventListener('click', startTest);
        restartBtn.addEventListener('click', restartTest);

        // å¼€å§‹æµ‹è¯•
        function startTest() {
            titleCard.classList.add('hidden');
            progressContainer.classList.remove('hidden'); // æ˜¾ç¤ºè¿›åº¦æ¡
            showQuestion(currentQuestionIndex);
        }

        // æ˜¾ç¤ºé—®é¢˜
        function showQuestion(index) {
            if (index >= questions.length) {
                calculateResult();
                return;
            }

            // æ›´æ–°è¿›åº¦æ¡
            const progressPercentage = ((index + 1) / questions.length) * 100;
            progressBar.style.width = `${progressPercentage}%`;
            progressText.textContent = `${index + 1}/${questions.length}`;

            // åˆ›å»ºé—®é¢˜å¡ç‰‡ - ç§»é™¤äº†é—®é¢˜æ•°æ˜¾ç¤º
            const question = questions[index];
            const questionCard = document.createElement('div');
            questionCard.className = 'bg-glass rounded-3xl p-6 md:p-8 mb-6 card-shadow w-full transition-all duration-500';
            questionCard.innerHTML = `
                <p class="text-gray-700 mb-8 text-base md:text-lg">${question.text}</p>
                <div class="space-y-4">
                    ${question.options.map((option, i) => `
                        <button class="option-btn w-full bg-white hover:bg-gray-50 text-gray-800 font-bold py-4 px-8 rounded-full text-left btn-hover btn-active transition-all flex items-center" data-type="${option.type}">
                            <span class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center mr-4">${String.fromCharCode(65 + i)}</span>
                            ${option.text}
                        </button>
                    `).join('')}
                </div>
            `;

            // æ¸…ç©ºé—®é¢˜å®¹å™¨å¹¶æ·»åŠ æ–°é—®é¢˜å¡ç‰‡
            questionsContainer.innerHTML = '';
            questionsContainer.appendChild(questionCard);

            // æ·»åŠ é€‰é¡¹æŒ‰é’®äº‹ä»¶ç›‘å¬å™¨
            const optionBtns = document.querySelectorAll('.option-btn');
            optionBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const type = btn.getAttribute('data-type');
                    answers[type]++;
                    currentQuestionIndex++;
                    showQuestion(currentQuestionIndex);
                });
            });
        }

        // è®¡ç®—ç»“æœ
        function calculateResult() {
            // è®¡ç®—æ¯ä¸ªç»´åº¦çš„ç»“æœ
            const eScore = answers['E'];
            const iScore = answers['I'];
            const sScore = answers['S'];
            const nScore = answers['N'];
            const tScore = answers['T'];
            const fScore = answers['F'];
            const jScore = answers['J'];
            const pScore = answers['P'];

            // ç¡®å®šæ¯ä¸ªç»´åº¦çš„ç±»å‹
            const eOrI = eScore >= iScore ? 'E' : 'I';
            const sOrN = sScore >= nScore ? 'S' : 'N';
            const tOrF = tScore >= fScore ? 'T' : 'F';
            const jOrP = jScore >= pScore ? 'J' : 'P';

            // ç»„åˆæˆMBTIç±»å‹
            const mbtiType = eOrI + sOrN + tOrF + jOrP;

            // æ˜¾ç¤ºç»“æœ
            showResult(mbtiType);
            
            // æ˜¾ç¤ºçƒŸèŠ±æ•ˆæœ
            showFireworks();
        }

        // æ˜¾ç¤ºç»“æœ
        function showResult(mbtiType) {
            const resultTypeElement = document.getElementById('result-type');
            const resultDescriptionElement = document.getElementById('result-description');
            
            resultTypeElement.innerHTML = mbtiType;
            resultDescriptionElement.innerHTML = mbtiTypes[mbtiType];
            
            // é‡ç½®å›¾ç‰‡çŠ¶æ€
            resultImage.style.opacity = '0';
            imagePlaceholder.classList.remove('image-error');
            imagePlaceholder.classList.add('image-loading');
            
            // å°è¯•åŠ è½½æœ¬åœ°å›¾ç‰‡
            resultImage.src = `images/${mbtiType}.png`;
            resultImage.alt = `${mbtiType}æ€§æ ¼ç±»å‹å›¾ç‰‡`;
            
            // æ·»åŠ æ›´è¯¦ç»†çš„å›¾ç‰‡åŠ è½½é”™è¯¯å¤„ç†
            resultImage.onerror = function() {
                console.error(`Failed to load image: images/${mbtiType}.png`);
                // å¦‚æœå›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œæ˜¾ç¤ºé»˜è®¤å›¾ç‰‡
                this.src = `https://picsum.photos/400/300?random=${mbtiType}`;
                this.alt = `${mbtiType}æ€§æ ¼ç±»å‹é»˜è®¤å›¾ç‰‡`;
                
                // æ·»åŠ é”™è¯¯çŠ¶æ€æç¤º
                imagePlaceholder.classList.remove('image-loading');
                imagePlaceholder.classList.add('image-error');
                imagePlaceholder.innerHTML = `<i class="fa fa-exclamation-triangle mr-2"></i>å›¾ç‰‡åŠ è½½å¤±è´¥`;
            };
            
            // æ·»åŠ åŠ è½½æˆåŠŸçš„æç¤º
            resultImage.onload = function() {
                console.log(`Successfully loaded image: ${this.src}`);
                // ç§»é™¤åŠ è½½çŠ¶æ€
                imagePlaceholder.classList.remove('image-loading');
                imagePlaceholder.classList.remove('image-error');
                imagePlaceholder.innerHTML = '';
                
                // æ·¡å…¥æ•ˆæœ
                setTimeout(() => {
                    resultImage.style.opacity = '1';
                }, 100);
            };

            // éšè—é¢˜ç›®å®¹å™¨å’Œè¿›åº¦æ¡ï¼Œæ˜¾ç¤ºç»“æœå¡ç‰‡
            questionsContainer.innerHTML = '';
            questionsContainer.classList.add('hidden');
            progressContainer.classList.add('hidden'); // éšè—è¿›åº¦æ¡
            resultCard.classList.remove('hidden');
            
            // åˆ›å»ºæ€§æ ¼ç»´åº¦å¯¹æ¯”å›¾è¡¨
            createChart();
        }

        // åˆ›å»ºæ€§æ ¼ç»´åº¦å¯¹æ¯”å›¾è¡¨ - ä½¿ç”¨ä¸¤ä¸ªç‹¬ç«‹çš„è‰²å—æ˜¾ç¤ºæ¯”ä¾‹ï¼Œå·¦ä¾§æš–è‰²ç³»ï¼Œå³ä¾§å†·è‰²ç³»
        function createChart() {
            const chartContainer = document.getElementById('mbti-chart-container');
            chartContainer.innerHTML = '';
            
            // è®¡ç®—æ¯ä¸ªç»´åº¦çš„ç™¾åˆ†æ¯”
            const ePercentage = Math.round((answers['E'] / (answers['E'] + answers['I'])) * 100) || 50;
            const iPercentage = 100 - ePercentage;
            const sPercentage = Math.round((answers['S'] / (answers['S'] + answers['N'])) * 100) || 50;
            const nPercentage = 100 - sPercentage;
            const tPercentage = Math.round((answers['T'] / (answers['T'] + answers['F'])) * 100) || 50;
            const fPercentage = 100 - tPercentage;
            const jPercentage = Math.round((answers['J'] / (answers['J'] + answers['P'])) * 100) || 50;
            const pPercentage = 100 - jPercentage;
            
            // å›ºå®šçš„æš–è‰²ç³»å’Œå†·è‰²ç³»é¢œè‰²
            const warmColors = ['#FF9AA2', '#FFB7B2', '#FFDAC1', '#FF9AA2'];
            const coolColors = ['#B5EAD7', '#E2F0CB', '#C7CEEA', '#B5EAD7'];
            
            // åˆ›å»ºå››ä¸ªç‹¬ç«‹çš„æ¨ªçŠ¶å æ¯”å›¾
            createDimensionChart(chartContainer, 'æ³¨æ„åŠ›æ–¹å‘', ePercentage, iPercentage, warmColors[0], coolColors[0], 'å¤–å€¾', 'å†…å€¾');
            createDimensionChart(chartContainer, 'è®¤çŸ¥æ–¹å¼', sPercentage, nPercentage, warmColors[1], coolColors[1], 'æ„Ÿè§‰', 'ç›´è§‰');
            createDimensionChart(chartContainer, 'åˆ¤æ–­æ–¹å¼', tPercentage, fPercentage, warmColors[2], coolColors[2], 'æ€ç»´', 'æƒ…æ„Ÿ');
            createDimensionChart(chartContainer, 'ç”Ÿæ´»æ–¹å¼', jPercentage, pPercentage, warmColors[3], coolColors[3], 'åˆ¤æ–­', 'çŸ¥è§‰');
        }

        // åˆ›å»ºå•ä¸ªç»´åº¦çš„æ¨ªçŠ¶å æ¯”å›¾ï¼Œä½¿ç”¨å›ºå®šçš„æš–è‰²ç³»å’Œå†·è‰²ç³»é¢œè‰²
        function createDimensionChart(container, title, leftPercentage, rightPercentage, leftColor, rightColor, leftLabel, rightLabel) {
            const dimensionDiv = document.createElement('div');
            dimensionDiv.className = 'space-y-4';
            
            // æ·»åŠ æ ‡é¢˜
            dimensionDiv.innerHTML = `
                <div class="text-white font-medium">${title}</div>
                <div class="flex justify-between text-white text-sm mb-1">
                    <span class="flex items-center">
                        <span class="w-3 h-3 rounded-full" style="background-color: ${leftColor}; margin-right: 1px;"></span> ${leftLabel} ${leftPercentage}%
                    </span>
                    <span class="flex items-center">
                        <span class="w-3 h-3 rounded-full" style="background-color: ${rightColor}; margin-right: 1px;"></span> ${rightLabel} ${rightPercentage}%
                    </span>
                </div>
                <div class="mbti-bar flex">
                    <div class="mbti-bar-fill" style="width: 0%; background-color: ${leftColor};" data-target="${leftPercentage}%"></div>
                    <div class="mbti-bar-fill" style="width: 0%; background-color: ${rightColor};" data-target="${rightPercentage}%"></div>
                </div>
            `;
            
            container.appendChild(dimensionDiv);
            
            // æ·»åŠ åŠ¨ç”»æ•ˆæœ
            setTimeout(() => {
                const leftBar = dimensionDiv.querySelector(`.mbti-bar-fill[data-target="${leftPercentage}%"]`);
                const rightBar = dimensionDiv.querySelector(`.mbti-bar-fill[data-target="${rightPercentage}%"]`);
                
                if (leftBar) leftBar.style.width = leftPercentage + '%';
                if (rightBar) rightBar.style.width = rightPercentage + '%';
            }, 300);
        }

        // æ˜¾ç¤ºçƒŸèŠ±æ•ˆæœ
        function showFireworks() {
            fireworksContainer.classList.remove('hidden');
            
            // åˆ›å»º10ä¸ªçƒŸèŠ±
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    createFirework();
                }, i * 300);
            }
            
            // 5ç§’åéšè—çƒŸèŠ±å®¹å™¨
            setTimeout(() => {
                fireworksContainer.classList.add('hidden');
                fireworksContainer.innerHTML = '';
            }, 5000);
        }

        // åˆ›å»ºå•ä¸ªçƒŸèŠ±
        function createFirework() {
            const firework = document.createElement('div');
            firework.className = 'firework';
            
            // éšæœºä½ç½®å’Œé¢œè‰²
            const x = Math.random() * 100;
            const y = Math.random() * 100;
            const size = Math.random() * 100 + 50;
            const colors = ['#FF9AA2', '#FFB7B2', '#FFDAC1', '#E2F0CB', '#B5EAD7', '#C7CEEA'];
            const color = colors[Math.floor(Math.random() * colors.length)];
            
            firework.style.left = `${x}%`;
            firework.style.top = `${y}%`;
            firework.style.width = `${size}px`;
            firework.style.height = `${size}px`;
            firework.style.backgroundColor = color;
            
            fireworksContainer.appendChild(firework);
            
            // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
            setTimeout(() => {
                firework.remove();
            }, 2000);
        }

        // é‡æ–°å¼€å§‹æµ‹è¯•
        function restartTest() {
            // é‡ç½®å˜é‡
            currentQuestionIndex = 0;
            answers = {
                "E": 0, "I": 0,
                "S": 0, "N": 0,
                "T": 0, "F": 0,
                "J": 0, "P": 0
            };
            
            // éšè—ç»“æœå¡ç‰‡ï¼Œæ˜¾ç¤ºæ ‡é¢˜å¡ç‰‡
            resultCard.classList.add('hidden');
            titleCard.classList.remove('hidden');
            questionsContainer.classList.remove('hidden');
            progressContainer.classList.add('hidden'); // ç¡®ä¿è¿›åº¦æ¡åˆå§‹æ˜¯éšè—çš„
            
            // é‡ç½®è¿›åº¦æ¡
            progressBar.style.width = '0%';
            progressText.textContent = `1/${questions.length}`;
            
            // æ¸…ç©ºé—®é¢˜å®¹å™¨
            questionsContainer.innerHTML = '';
            
            // ç§»é™¤çƒŸèŠ±å®¹å™¨å†…å®¹
            fireworksContainer.innerHTML = '';
            
            // é‡ç½®å›¾ç‰‡çŠ¶æ€
            resultImage.src = '';
            imagePlaceholder.classList.remove('image-loading', 'image-error');
            imagePlaceholder.innerHTML = '';
        }
    </script>
</body>

</html>